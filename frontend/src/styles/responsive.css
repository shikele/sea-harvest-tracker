/* Mobile-first responsive styles for Sea Harvest Tracker */
/* Optimized for iPhone 14 (390px width) */

/* Remove focus outlines from all buttons */
button {
  outline: none !important;
  -webkit-tap-highlight-color: transparent;
}

button:focus,
button:focus-visible,
button:active,
button:-moz-focusring,
.species-chip:focus,
.species-chip:focus-visible,
.filter-button:focus,
.filter-button:focus-visible {
  outline: none !important;
  box-shadow: none !important;
  border-color: inherit !important;
}

*:focus {
  outline: none !important;
}

/* Base styles - Mobile first (no min-width constraint) */
html, body {
  overflow-x: hidden;
  -webkit-text-size-adjust: 100%;
}

/* ==================== */
/* MOBILE (iPhone 14)   */
/* ==================== */
@media screen and (max-width: 430px) {
  /* Dashboard container */
  .dashboard-container {
    padding: 12px !important;
    max-width: 100% !important;
  }

  /* Header */
  .dashboard-header {
    flex-direction: column !important;
    align-items: flex-start !important;
    gap: 8px !important;
    margin-bottom: 16px !important;
  }

  .dashboard-header h1 {
    font-size: 22px !important;
  }

  /* Tab container */
  .tab-container {
    gap: 0 !important;
    width: 100% !important;
    margin-bottom: 16px !important;
  }

  .tab-button {
    flex: 1 !important;
    padding: 12px 8px !important;
    font-size: 14px !important;
    min-height: 44px !important;
  }

  /* Stats row - 2x2 grid (compact) */
  .stats-row {
    grid-template-columns: repeat(2, 1fr) !important;
    gap: 6px !important;
    margin-bottom: 12px !important;
  }

  .stat-card {
    padding: 8px 10px !important;
    border-radius: 6px !important;
    display: flex !important;
    flex-direction: row !important;
    align-items: center !important;
    justify-content: space-between !important;
    gap: 6px !important;
  }

  .stat-value {
    font-size: 20px !important;
    order: 2 !important;
  }

  .stat-label {
    font-size: 11px !important;
    order: 1 !important;
  }

  /* Map header - centered title with legend below */
  .map-header {
    gap: 6px !important;
    margin-bottom: 10px !important;
  }

  .map-title {
    font-size: 16px !important;
  }

  .map-legend {
    gap: 8px !important;
    font-size: 10px !important;
  }

  /* Map - ensure no overlap, move up */
  .map-container {
    position: relative !important;
    height: auto !important;
    min-height: auto !important;
    max-height: none !important;
    border-radius: 8px !important;
    margin-top: 0 !important;
    margin-bottom: 16px !important;
    overflow: visible !important;
    z-index: 1 !important;
  }

  .map-container > div {
    height: auto !important;
  }

  /* Leaflet map wrapper */
  .map-wrapper {
    height: 380px !important;
    margin-bottom: 12px !important;
  }

  /* Main content - single column on mobile */
  .main-content {
    display: flex !important;
    flex-direction: column !important;
    gap: 16px !important;
    position: relative !important;
    z-index: 0 !important;
  }

  /* Mobile ordering: Calendar (1), Beach Detail (2), Beach List (3) */
  .calendar-section {
    order: 1 !important;
    position: relative !important;
    z-index: 1 !important;
  }

  .beach-detail-section {
    order: 2 !important;
    position: relative !important;
    z-index: 1 !important;
  }

  .beach-list-wrapper {
    order: 3 !important;
    position: relative !important;
    z-index: 1 !important;
  }

  /* Ensure calendar container doesn't overlap */
  .calendar-container {
    position: relative !important;
    z-index: 1 !important;
    overflow: visible !important;
  }

  /* Calendar container */
  .calendar-container {
    padding: 12px !important;
    border-radius: 10px !important;
  }

  .calendar-header {
    flex-direction: column !important;
    align-items: stretch !important;
    gap: 10px !important;
    margin-bottom: 12px !important;
  }

  .calendar-title {
    font-size: 16px !important;
    text-align: center !important;
  }

  .calendar-view-toggle {
    width: 100% !important;
    padding: 3px !important;
    justify-content: center !important;
  }

  .calendar-view-button {
    flex: 1 !important;
    padding: 10px 16px !important;
    font-size: 13px !important;
    min-height: 44px !important;
  }

  /* Species filter in calendar */
  .species-filter {
    padding: 10px !important;
    margin-bottom: 12px !important;
    gap: 6px !important;
  }

  .species-chips {
    gap: 6px !important;
  }

  .species-chip {
    padding: 8px 12px !important;
    font-size: 12px !important;
    min-height: 36px !important;
    border-radius: 18px !important;
  }

  /* Calendar navigation */
  .calendar-nav {
    flex-wrap: wrap !important;
    justify-content: center !important;
    gap: 8px !important;
    margin-bottom: 12px !important;
  }

  .calendar-nav-button {
    padding: 10px 14px !important;
    font-size: 13px !important;
    min-height: 44px !important;
  }

  .calendar-label {
    font-size: 14px !important;
    min-width: 120px !important;
    text-align: center !important;
    order: -1 !important;
    width: 100% !important;
    margin-bottom: 4px !important;
  }

  /* 7-day grid - VERTICAL layout on mobile (ultra-compact) */
  .calendar-7day-grid {
    display: flex !important;
    flex-direction: column !important;
    gap: 4px !important;
    padding: 0 !important;
    margin: 0 !important;
    overflow: visible !important;
  }

  .calendar-day-card {
    width: 100% !important;
    min-width: unset !important;
    flex-shrink: 0 !important;
    height: auto !important;
    min-height: 36px !important;
    padding: 5px 8px !important;
    border-radius: 5px !important;
    display: flex !important;
    flex-direction: row !important;
    align-items: center !important;
    gap: 8px !important;
  }

  .calendar-day-header {
    margin-bottom: 0 !important;
    min-width: 38px !important;
    text-align: center !important;
    flex-shrink: 0 !important;
  }

  .calendar-day-of-week {
    font-size: 9px !important;
    margin-bottom: 0 !important;
  }

  .calendar-day-date {
    font-size: 14px !important;
    line-height: 1 !important;
  }

  /* Beach list in day card - ultra-compact */
  .calendar-beach-list {
    flex: 1 !important;
    display: flex !important;
    flex-direction: column !important;
    gap: 2px !important;
  }

  .calendar-beach-item {
    padding: 3px 6px !important;
    margin-bottom: 0 !important;
    border-radius: 3px !important;
  }

  .calendar-beach-name {
    font-size: 11px !important;
  }

  .calendar-tide-time {
    font-size: 9px !important;
  }

  /* Empty day message - ultra-compact */
  .calendar-day-card .empty-day,
  .calendar-beach-list > div {
    font-size: 10px !important;
  }

  .calendar-beach-list .empty-day {
    flex-direction: row !important;
    gap: 4px !important;
    justify-content: flex-start !important;
  }

  /* Month view */
  .calendar-weekday-header {
    gap: 2px !important;
  }

  .calendar-weekday-label {
    font-size: 10px !important;
    padding: 6px 0 !important;
  }

  .calendar-month-grid {
    gap: 3px !important;
  }

  .calendar-month-day {
    padding: 4px !important;
    min-height: 55px !important;
    border-radius: 4px !important;
  }

  .calendar-month-day-date {
    font-size: 12px !important;
  }

  .calendar-month-beach-item {
    padding: 2px 3px !important;
    margin-bottom: 1px !important;
    font-size: 8px !important;
    border-left-width: 2px !important;
  }

  .calendar-month-beach-item .calendar-beach-name {
    font-size: 7px !important;
  }

  .calendar-tide-time-month {
    font-size: 7px !important;
  }

  /* Calendar legend */
  .calendar-legend {
    margin-top: 12px !important;
    gap: 8px !important;
    flex-wrap: wrap !important;
    justify-content: center !important;
    font-size: 10px !important;
  }

  .calendar-legend-item {
    font-size: 10px !important;
  }

  /* Beach list section */
  .beach-list-section {
    padding: 12px !important;
    border-radius: 10px !important;
  }

  .section-title {
    font-size: 16px !important;
  }

  /* Filter section */
  .filter-section {
    padding: 10px !important;
    border-radius: 8px !important;
  }

  .search-sort-row {
    flex-wrap: wrap !important;
    gap: 8px !important;
  }

  .search-input,
  .search-input-small {
    font-size: 16px !important; /* Prevents iOS zoom */
    padding: 10px 12px !important;
    width: 100% !important;
  }

  .filter-group {
    gap: 10px !important;
  }

  .filter-group-row {
    gap: 6px !important;
  }

  .filter-button,
  .filter-button-small {
    padding: 8px 12px !important;
    font-size: 12px !important;
    min-height: 36px !important;
  }

  .sort-button {
    padding: 10px 14px !important;
    font-size: 13px !important;
    min-height: 44px !important;
  }

  /* Beach cards */
  .beach-card {
    padding: 12px !important;
    margin-bottom: 10px !important;
    border-radius: 8px !important;
  }

  .beach-name {
    font-size: 14px !important;
  }

  .beach-location {
    font-size: 11px !important;
  }

  .beach-status {
    font-size: 11px !important;
    padding: 3px 8px !important;
  }

  .tide-info {
    padding: 8px !important;
    flex-direction: column !important;
    align-items: flex-start !important;
    gap: 6px !important;
    font-size: 12px !important;
  }

  /* Pagination */
  .pagination {
    flex-wrap: wrap !important;
    gap: 6px !important;
    justify-content: center !important;
  }

  .page-button {
    min-width: 40px !important;
    min-height: 40px !important;
    padding: 8px !important;
    font-size: 13px !important;
  }

  .page-info {
    width: 100% !important;
    text-align: center !important;
    margin-top: 8px !important;
  }

  /* Selected beach panel */
  .selected-beach-panel {
    padding: 12px !important;
    border-radius: 10px !important;
  }

  .tide-chart-container {
    height: 180px !important;
  }

  /* Species Guide */
  .species-guide-container {
    padding: 12px !important;
  }

  .species-guide-title {
    font-size: 20px !important;
  }

  .species-grid {
    grid-template-columns: 1fr !important;
    gap: 12px !important;
  }

  .species-card {
    min-width: unset !important;
  }

  .species-card-body {
    padding: 12px !important;
  }

  .species-name {
    font-size: 15px !important;
  }

  .chinese-name {
    font-size: 13px !important;
  }

  .scientific-name {
    font-size: 11px !important;
  }

  .species-description {
    font-size: 12px !important;
    line-height: 1.4 !important;
  }

  /* Modal */
  .species-modal-content {
    max-width: 100% !important;
    margin: 8px !important;
    max-height: calc(100vh - 16px) !important;
    border-radius: 12px !important;
  }

  .modal-image {
    height: 180px !important;
  }

  .modal-body {
    padding: 14px !important;
  }

  .detail-grid {
    grid-template-columns: 1fr !important;
    gap: 10px !important;
  }

  .close-button {
    width: 36px !important;
    height: 36px !important;
    font-size: 20px !important;
  }

  .thumbnail-strip {
    padding: 8px !important;
    gap: 6px !important;
  }

  .thumbnail {
    width: 48px !important;
    height: 36px !important;
  }

  .image-nav-button {
    width: 36px !important;
    height: 36px !important;
  }

  /* Footer */
  .footer {
    padding: 16px 12px !important;
    font-size: 11px !important;
  }

  .footer a {
    display: block !important;
    margin: 6px 0 !important;
  }
}

/* ==================== */
/* TABLET (768px)       */
/* ==================== */
@media screen and (min-width: 431px) and (max-width: 768px) {
  .dashboard-container {
    padding: 16px !important;
  }

  /* Tablet: Single column with flex ordering */
  .main-content {
    display: flex !important;
    flex-direction: column !important;
    gap: 20px !important;
  }

  /* Tablet ordering: Calendar (1), Beach Detail (2), Beach List (3) */
  .calendar-section {
    order: 1 !important;
  }

  .beach-detail-section {
    order: 2 !important;
  }

  .beach-list-wrapper {
    order: 3 !important;
  }

  .stats-row {
    grid-template-columns: repeat(4, 1fr) !important;
    gap: 12px !important;
  }

  .map-container {
    height: 280px !important;
  }

  /* Tablet: Vertical calendar layout (compact) */
  .calendar-7day-grid {
    display: flex !important;
    flex-direction: column !important;
    gap: 8px !important;
  }

  .calendar-day-card {
    width: 100% !important;
    min-width: unset !important;
    display: flex !important;
    flex-direction: row !important;
    align-items: center !important;
    gap: 12px !important;
    min-height: 56px !important;
    padding: 10px 12px !important;
  }

  .calendar-day-header {
    min-width: 50px !important;
    text-align: center !important;
  }

  .calendar-beach-list {
    flex: 1 !important;
  }

  .map-container {
    margin-bottom: 20px !important;
  }

  .species-grid {
    grid-template-columns: repeat(2, 1fr) !important;
  }
}

/* ==================== */
/* DESKTOP (769px+)     */
/* ==================== */
@media screen and (min-width: 769px) {
  .dashboard-container {
    padding: 20px !important;
    max-width: 1400px !important;
    margin: 0 auto !important;
  }

  /* Desktop: Two-column layout with CSS Grid */
  .main-content {
    display: grid !important;
    grid-template-columns: 1fr 400px !important;
    grid-template-rows: auto auto !important;
    gap: 24px !important;
  }

  /* Calendar spans left column, row 1 */
  .calendar-section {
    grid-column: 1 !important;
    grid-row: 1 !important;
    order: unset !important;
  }

  /* Beach detail spans right column, both rows */
  .beach-detail-section {
    grid-column: 2 !important;
    grid-row: 1 / 3 !important;
    order: unset !important;
  }

  /* Beach list spans left column, row 2 */
  .beach-list-wrapper {
    grid-column: 1 !important;
    grid-row: 2 !important;
    order: unset !important;
  }

  .stats-row {
    grid-template-columns: repeat(4, 1fr) !important;
  }

  .calendar-7day-grid {
    display: grid !important;
    grid-template-columns: repeat(7, 1fr) !important;
    overflow-x: visible !important;
  }

  .calendar-day-card {
    min-width: unset !important;
  }
}

/* ==================== */
/* TOUCH DEVICES        */
/* ==================== */
@media (hover: none) and (pointer: coarse) {
  /* Ensure all interactive elements meet 44px touch target */
  .filter-button,
  .sort-button,
  .page-button,
  .tab-button,
  .refresh-button,
  .calendar-view-button,
  .calendar-nav-button,
  .species-chip {
    min-height: 44px !important;
  }

  .beach-card {
    min-height: 60px !important;
  }

  .species-checkbox-label {
    min-height: 44px !important;
    display: flex !important;
    align-items: center !important;
  }

  .thumbnail,
  .image-nav-button {
    min-width: 44px !important;
    min-height: 44px !important;
  }

  .calendar-month-day {
    min-height: 50px !important;
  }
}

/* ==================== */
/* LANDSCAPE PHONE      */
/* ==================== */
@media screen and (max-width: 896px) and (orientation: landscape) {
  .map-container {
    height: 180px !important;
  }

  .modal-image {
    height: 140px !important;
  }

  .species-modal-content {
    max-height: calc(100vh - 16px) !important;
  }

  .calendar-day-card {
    min-height: 120px !important;
  }
}

/* ==================== */
/* SAFE AREA (Notch)    */
/* ==================== */
@supports (padding: max(0px)) {
  .dashboard-container {
    padding-left: max(12px, env(safe-area-inset-left)) !important;
    padding-right: max(12px, env(safe-area-inset-right)) !important;
    padding-bottom: max(12px, env(safe-area-inset-bottom)) !important;
  }
}

/* Smooth scrolling */
@media (prefers-reduced-motion: no-preference) {
  html {
    scroll-behavior: smooth;
  }
}

/* Dark mode support (optional) */
@media (prefers-color-scheme: dark) {
  /* Can add dark mode styles here if needed */
}
